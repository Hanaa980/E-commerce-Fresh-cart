import{r as g,W as T,c as k,j as e,y as c,L as B}from"./index-4N9hYKY1.js";function M({product:s}){var b,f;let{addToWishList:o,getWishList:a,removeFromWishList:j,wishListId:n}=g.useContext(T),{setCartDetails:w,checked:d,cartDetails:l,updateCountToCart:u,setChecked:C,getCart:p,addToCart:v}=g.useContext(k);const h=n==null?void 0:n.includes(s.id),x=d==null?void 0:d.includes(s.id);async function N(){if(h){let t=await j(s.id);t.status=="success"&&c.success(t.message,{position:"bottom-right",autoClose:3e3,draggable:!0,theme:"colored"})}else{let t=await o(s.id);t.status=="success"&&c.success(t.message,{position:"bottom-right",autoClose:3e3,draggable:!0,theme:"colored"})}a()}async function L(){var t,y;if(!x){let r=await v(s.id);r.status==="success"&&(w(r),C((y=(t=r==null?void 0:r.data)==null?void 0:t.products)==null?void 0:y.map(W=>W.product.id)),await p(),c.success(r.message,{position:"bottom-right",autoClose:3e3,draggable:!0,theme:"colored"}))}}const m=(f=(b=l==null?void 0:l.data)==null?void 0:b.products)==null?void 0:f.find(t=>t.product.id===s.id),i=m?m.count:0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-around mb-2",children:[e.jsxs("p",{children:[s.price," eg"]}),e.jsxs("p",{children:[e.jsx("i",{className:"fa fa-star text-yellow-300"}),s.ratingsAverage]}),e.jsx("i",{onClick:N,className:`fa-heart ${h?"fa-solid text-red-700":"fa-regular"}`})]}),x&&i>0?e.jsxs("div",{className:"flex items-center justify-center ",children:[e.jsxs("button",{onClick:()=>u(s.id,i-1),className:"inline-flex items-center justify-center p-1 me-3 text-sm font-medium h-6 w-6 text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700",type:"button",children:[e.jsx("span",{className:"sr-only",children:"Quantity button"}),e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 2",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M1 1h16"})})]}),e.jsx("div",{children:e.jsx("span",{className:"bg-gray-50  border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block px-2.5 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 w-[100px] text-center",children:i})}),e.jsxs("button",{onClick:()=>u(s.id,i+1),className:"inline-flex items-center justify-center h-6 w-6 p-1 ms-3 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700",type:"button",children:[e.jsx("span",{className:"sr-only",children:"Quantity button"}),e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 1v16M1 9h16"})})]})]}):e.jsx("button",{onClick:L,className:"btn bg-main p-2 rounded-lg text-white w-full",children:"add to cart"})]})}function $({product:s}){var a;let{addToCart:o}=g.useContext(k);return e.jsxs("div",{className:"product sm:w-6/12  md:w-4/12 lg:w-2/12 w-[80%] m-auto p-2 hover:bg-slate-100 duration-[1s]",children:[e.jsxs(B,{to:`/productDetails/${s.id}/${(a=s==null?void 0:s.category)==null?void 0:a._id}`,children:[e.jsx("img",{src:s.imageCover,className:"w-full py-2",alt:""}),e.jsx("h2",{children:s.title.split(" ").splice(0,2).join(" ")})]}),e.jsx(M,{product:s,addToCart:o})]})}export{M as B,$ as P};
