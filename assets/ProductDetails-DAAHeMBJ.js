import{b as x,r as a,j as e,a as f,c as p,G as h}from"./index-Ea1Gdlbw.js";import{P as j,B as g}from"./ProductItem-B1PaWYj1.js";import{S as y}from"./index-DL4fobLE.js";function m(l,r,c){return l.filter(s=>s.category._id==r&&s._id!==c)}function w({product:l}){let{id:r,categoryId:c}=x();const[s,i]=a.useState([]),[o,d]=a.useState([]);function n(){f.get("https://ecommerce.routemisr.com/api/v1/products").then(({data:t})=>{d(t.data);let u=m(t.data,c,r);i(u)}).catch(t=>{})}return a.useEffect(()=>{n()},[]),a.useEffect(()=>{let t=m(o,c,r);i(t)},[r]),e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl",children:"RelatedProducts "}),e.jsx("div",{className:"flex flex-wrap my-10",children:s.map(t=>e.jsx(j,{product:t},t.id))})]})}function v(){let{addToCart:l}=a.useContext(p);const[r,c]=a.useState(!0),[s,i]=a.useState({});let{id:o}=x(),d={dots:!0,infinite:!0,autoplay:!0,draggable:!0,autoplaySpeed:1e3,speed:500,slidesToShow:1,slidesToScroll:1,arrows:!1};function n(){f.get(`https://ecommerce.routemisr.com/api/v1/products/${o}`).then(({data:t})=>{i(t.data),c(!1)}).catch(t=>{c(!1)})}return a.useEffect(()=>{n()},[o]),e.jsx(e.Fragment,{children:r?e.jsx("div",{className:"mt-[100px] flex w-fullh-lvh items-center justify-center",children:e.jsx(h,{color:"#0aad0a",size:50})}):e.jsxs(e.Fragment,{children:[" ",e.jsxs("div",{className:" mt-[100px] w-11/12 m-auto sm:flex-row flex-col  flex  gap-y-5 justify-center my-10 items-center",children:[e.jsx("div",{className:" w-full p-2 sm:w-4/12 ",children:e.jsx(y,{...d,children:s.images.map((t,u)=>e.jsx("img",{src:t},u))})}),e.jsxs("div",{className:"w-full flex  flex-col sm:w-8/12 ",children:[e.jsx("h2",{className:"my-5 text-2xl ",children:s.title}),e.jsx("p",{className:" text-gray-400",children:s.description}),e.jsx("span",{className:"my-2 ",children:s.category.name}),e.jsx(g,{product:s,addToCart:l})]})]}),e.jsx(w,{product:s})]})})}export{v as default};
