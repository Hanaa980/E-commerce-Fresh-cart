import{j as e,r as x,c as v,y as h,W as L,L as W}from"./index-B4C5FPII.js";import{C as w}from"./ClipLoader-BQARyqfI.js";function T({rating:s}){const r=s/5*100;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"star-wrapper ",children:[e.jsx("div",{className:"stars-outer",children:e.jsx("div",{className:"stars-inner",style:{width:`${r}%`}})}),e.jsxs("p",{className:"text-base ms-1",children:[" ",s]})]})})}function P({product:s}){var j,p;const[r,t]=x.useState(!1);let{setCartDetails:g,checked:l,cartDetails:a,updateCountToCart:d,setChecked:m,getCart:i,addToCart:C}=x.useContext(v);const f=l==null?void 0:l.includes(s.id);async function k(){var n,u;if(t(!0),!f){let o=await C(s.id);o.status==="success"&&(g(o),m((u=(n=o==null?void 0:o.data)==null?void 0:n.products)==null?void 0:u.map(N=>N.product.id)),console.log(a),await i(),h.success(o.message,{position:"bottom-right",autoClose:3e3,draggable:!0,theme:"colored"}),t(!1))}}async function b(n,u){t(!0),await d(n,u),t(!1)}const y=(p=(j=a==null?void 0:a.data)==null?void 0:j.products)==null?void 0:p.find(n=>n.product.id===s.id),c=y?y.count:0;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-between m-3 w-[90%]  ",children:[e.jsxs("p",{className:"text-base font-bold text-main",children:[s.price," EGP"]}),f&&c>0?e.jsxs("div",{className:"flex w-[50px] items-center justify-center ",children:[e.jsxs("button",{onClick:()=>b(s.id,c-1),className:"inline-flex items-center justify-center p-1 me-1 text-sm font-medium h-6 w-6 text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700",type:"button",children:[e.jsx("span",{className:"sr-only",children:"Quantity button"}),e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 2",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M1 1h16"})})]}),e.jsx("div",{children:e.jsx("span",{className:"bg-gray-50  border border-gray-300 text-gray-900 text-sm rounded-lg block  py-1.5  w-[30px] text-center",children:r?e.jsx(w,{size:20,color:"#000 "}):c})}),e.jsxs("button",{onClick:()=>b(s.id,c+1),className:"inline-flex items-center justify-center h-6 w-6 p-1 ms-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700",type:"button",children:[e.jsx("span",{className:"sr-only",children:"Quantity button"}),e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 1v16M1 9h16"})})]})]}):e.jsx("button",{onClick:k,className:"btn bg-main p-2 rounded-lg text-white",children:r?e.jsx(w,{size:20,color:"#ffffff"}):"Add +"})]})})}function $({product:s,className:r}){let{addToWishList:t,getWishList:g,removeFromWishList:l,wishListId:a}=x.useContext(L);const d=a==null?void 0:a.includes(s.id);async function m(){if(d){let i=await l(s.id);i.status=="success"&&h.success(i.message,{position:"bottom-right",autoClose:3e3,draggable:!0,style:{borderRadius:"10px",color:"#555"}})}else{let i=await t(s.id);i.status=="success"&&h.success(i.message,{position:"bottom-right",autoClose:3e3,draggable:!0,style:{borderRadius:"10px",color:"#555"}})}g()}return e.jsx(e.Fragment,{children:e.jsx("i",{onClick:m,className:`fa-heart ${d?"fa-solid text-red-700":"fa-regular"} ${r} bg-slate-200 p-4 rounded-full text-xl cursor-pointer `})})}function R({product:s}){var t;let{addToCart:r}=x.useContext(v);return e.jsxs("div",{className:"product relative my-5 sm:px-[2px] px-6 sm:w-6/12 md:w-4/12 xl:w-3/12  w-[100%]  ",children:[e.jsx($,{product:s,className:" absolute z-10 right-7 top-7  "}),e.jsxs("div",{className:"border rounded-2xl overflow-hidden   m-1",children:[e.jsx(W,{to:`/productDetails/${s.id}/${(t=s==null?void 0:s.category)==null?void 0:t._id}`,children:e.jsx("div",{className:"overflow-hidden w-full",children:e.jsx("img",{src:s.imageCover,className:"w-full rounded-t-2xl scale-[113%] ",alt:""})})}),e.jsxs("div",{className:"border rounded-b-2xl  p-3 bg-gray-200/50",children:[e.jsx("h2",{className:"my-3 font-bold text-lg line-clamp-1",children:s.title.split(" ").splice(0,2).join(" ")}),e.jsx(T,{rating:s.ratingsAverage}),e.jsx("p",{className:"text-sm my-2 line-clamp-1",children:s.description}),e.jsx(P,{product:s,addToCart:r})]})]})]})}export{P as B,R as P,$ as W};
