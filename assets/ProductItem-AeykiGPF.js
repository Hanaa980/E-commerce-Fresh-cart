import{j as e,r as g,c as v,y as h,W as L,L as W}from"./index-C2O5eSQt.js";import{C as w}from"./ClipLoader-BfEd_EFM.js";function T({rating:s}){const t=s/5*100;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"star-wrapper ",children:[e.jsx("div",{className:"stars-outer",children:e.jsx("div",{className:"stars-inner",style:{width:`${t}%`}})}),e.jsxs("p",{className:"text-base ms-1",children:[" ",s]})]})})}function P({product:s}){var j,p;const[t,a]=g.useState(!1);let{setCartDetails:n,checked:d,cartDetails:r,updateCountToCart:c,setChecked:m,getCart:i,addToCart:C}=g.useContext(v);const f=d==null?void 0:d.includes(s.id);async function k(){var o,x;if(a(!0),!f){let l=await C(s.id);l.status==="success"&&(n(l),m((x=(o=l==null?void 0:l.data)==null?void 0:o.products)==null?void 0:x.map(N=>N.product.id)),console.log(r),await i(),a(!1),h.success(l.message,{position:"bottom-right",autoClose:3e3,draggable:!0,theme:"colored"}))}}async function b(o,x){a(!0),await c(o,x),a(!1)}const y=(p=(j=r==null?void 0:r.data)==null?void 0:j.products)==null?void 0:p.find(o=>o.product.id===s.id),u=y?y.count:0;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-between m-3 w-[90%]  ",children:[e.jsxs("p",{className:"text-base font-bold text-main",children:[s.price," EGP"]}),f&&u>0?e.jsxs("div",{className:"flex w-[50px] items-center justify-center ",children:[e.jsxs("button",{onClick:()=>b(s.id,u-1),className:"inline-flex items-center justify-center p-1 me-1 text-sm font-medium h-6 w-6 text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700",type:"button",children:[e.jsx("span",{className:"sr-only",children:"Quantity button"}),e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 2",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M1 1h16"})})]}),e.jsx("div",{children:e.jsx("span",{className:"bg-gray-50  border border-gray-300 text-gray-900 text-sm rounded-lg block  py-1.5  w-[30px] text-center",children:t?e.jsx(w,{size:20,color:"#000 "}):u})}),e.jsxs("button",{onClick:()=>b(s.id,u-1),className:"inline-flex items-center justify-center h-6 w-6 p-1 ms-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700",type:"button",children:[e.jsx("span",{className:"sr-only",children:"Quantity button"}),e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 1v16M1 9h16"})})]})]}):e.jsx("button",{onClick:k,className:"btn bg-main p-2 rounded-lg text-white",children:t?e.jsx(w,{size:20,color:"#ffffff"}):"Add +"})]})})}function $({product:s,className:t}){let{addToWishList:a,getWishList:n,removeFromWishList:d,wishListId:r}=g.useContext(L);const c=r==null?void 0:r.includes(s.id);async function m(){if(c){let i=await d(s.id);i.status=="success"&&h.success(i.message,{position:"bottom-right",autoClose:3e3,draggable:!0,style:{borderRadius:"10px",color:"#555"}})}else{let i=await a(s.id);i.status=="success"&&h.success(i.message,{position:"bottom-right",autoClose:3e3,draggable:!0,style:{borderRadius:"10px",color:"#555"}})}n()}return e.jsx(e.Fragment,{children:e.jsx("i",{onClick:m,className:`fa-heart ${c?"fa-solid text-red-700":"fa-regular"} ${t} bg-slate-200 p-4 rounded-full text-xl cursor-pointer `})})}function R({product:s}){var n;let{addToCart:t,isLoader:a}=g.useContext(v);return e.jsxs("div",{className:"product relative my-5 sm:px-[2px] px-6 sm:w-6/12 md:w-4/12 xl:w-3/12  w-[100%]  ",children:[e.jsx($,{product:s,className:" absolute z-10 right-7 top-7  "}),e.jsxs("div",{className:"border rounded-2xl overflow-hidden   m-1",children:[e.jsx(W,{to:`/productDetails/${s.id}/${(n=s==null?void 0:s.category)==null?void 0:n._id}`,children:e.jsx("div",{className:"overflow-hidden w-full",children:e.jsx("img",{src:s.imageCover,className:"w-full rounded-t-2xl scale-[113%] ",alt:""})})}),e.jsxs("div",{className:"border rounded-b-2xl  p-3 bg-gray-200/50",children:[e.jsx("h2",{className:"my-3 font-bold text-lg line-clamp-1",children:s.title.split(" ").splice(0,2).join(" ")}),e.jsx(T,{rating:s.ratingsAverage}),e.jsx("p",{className:"text-sm my-2 line-clamp-1",children:s.description}),e.jsx(P,{product:s,addToCart:t})]})]})]})}export{P as B,R as P,$ as W};
