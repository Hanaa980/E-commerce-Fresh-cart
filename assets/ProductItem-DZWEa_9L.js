import{j as e,r as m,c as p,y as u,W as k,L as C}from"./index-ftlFQuBq.js";import{C as N}from"./ClipLoader-D6yvEb26.js";function L({rating:s}){const r=s/5*100;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"star-wrapper ",children:[e.jsx("div",{className:"stars-outer",children:e.jsx("div",{className:"stars-inner",style:{width:`${r}%`}})}),e.jsxs("p",{className:"text-base ms-1",children:[" ",s]})]})})}function W({product:s}){var b,y;let{isLoader:r,setCartDetails:l,checked:t,cartDetails:o,updateCountToCart:i,setChecked:d,getCart:g,addToCart:a}=m.useContext(p);const h=t==null?void 0:t.includes(s.id);async function w(){var x,j;if(!h){let n=await a(s.id);n.status==="success"&&(l(n),d((j=(x=n==null?void 0:n.data)==null?void 0:x.products)==null?void 0:j.map(v=>v.product.id)),await g(),u.success(n.message,{position:"bottom-right",autoClose:3e3,draggable:!0,theme:"colored"}))}}const f=(y=(b=o==null?void 0:o.data)==null?void 0:b.products)==null?void 0:y.find(x=>x.product.id===s.id),c=f?f.count:0;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-between m-3 w-[90%]  ",children:[e.jsxs("p",{className:"text-base font-bold text-main",children:[s.price," EGP"]}),h&&c>0?e.jsxs("div",{className:"flex w-[50px] items-center justify-center ",children:[e.jsxs("button",{onClick:()=>i(s.id,c-1),className:"inline-flex items-center justify-center p-1 me-1 text-sm font-medium h-6 w-6 text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700",type:"button",children:[e.jsx("span",{className:"sr-only",children:"Quantity button"}),e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 2",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M1 1h16"})})]}),e.jsx("div",{children:e.jsx("span",{className:"bg-gray-50  border border-gray-300 text-gray-900 text-sm rounded-lg block  py-1.5  w-[30px] text-center",children:c})}),e.jsxs("button",{onClick:()=>i(s.id,c+1),className:"inline-flex items-center justify-center h-6 w-6 p-1 ms-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700",type:"button",children:[e.jsx("span",{className:"sr-only",children:"Quantity button"}),e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 1v16M1 9h16"})})]})]}):e.jsxs("button",{onClick:w,className:"btn bg-main p-2 rounded-lg text-white",children:[r?e.jsx(N,{size:20,color:"#ffffff"}):"Add +"," "]})]})})}function T({product:s,className:r}){let{addToWishList:l,getWishList:t,removeFromWishList:o,wishListId:i}=m.useContext(k);const d=i==null?void 0:i.includes(s.id);async function g(){if(d){let a=await o(s.id);a.status=="success"&&u.success(a.message,{position:"bottom-right",autoClose:3e3,draggable:!0,style:{borderRadius:"10px",color:"#555"}})}else{let a=await l(s.id);a.status=="success"&&u.success(a.message,{position:"bottom-right",autoClose:3e3,draggable:!0,style:{borderRadius:"10px",color:"#555"}})}t()}return e.jsx(e.Fragment,{children:e.jsx("i",{onClick:g,className:`fa-heart ${d?"fa-solid text-red-700":"fa-regular"} ${r} bg-slate-200 p-4 rounded-full text-xl cursor-pointer `})})}function B({product:s}){var t;let{addToCart:r,isLoader:l}=m.useContext(p);return e.jsxs("div",{className:"product relative my-5 sm:px-[2px] px-6 sm:w-6/12 md:w-4/12 xl:w-3/12  w-[100%]  ",children:[e.jsx(T,{product:s,className:" absolute z-10 right-7 top-7  "}),e.jsxs("div",{className:"border rounded-2xl overflow-hidden   m-1",children:[e.jsx(C,{to:`/productDetails/${s.id}/${(t=s==null?void 0:s.category)==null?void 0:t._id}`,children:e.jsx("div",{className:"overflow-hidden w-full",children:e.jsx("img",{src:s.imageCover,className:"w-full rounded-t-2xl scale-[113%] ",alt:""})})}),e.jsxs("div",{className:"border rounded-b-2xl  p-3 bg-gray-200/50",children:[e.jsx("h2",{className:"my-3 font-bold text-lg line-clamp-1",children:s.title.split(" ").splice(0,2).join(" ")}),e.jsx(L,{rating:s.ratingsAverage}),e.jsx("p",{className:"text-sm my-2 line-clamp-1",children:s.description}),e.jsx(W,{product:s,addToCart:r})]})]})]})}export{W as B,B as P,T as W};
