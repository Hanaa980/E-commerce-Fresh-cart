import{r as a,t as b,c as p,j as e,H as v,L as o,G as N}from"./index-DKh-QKsi.js";import{C as w}from"./ClipLoader-DLxUU1sf.js";function L(){var n,c,x;const[m,l]=a.useState({});let{token:h}=a.useContext(b),{cartDetails:s,updateCountToCart:j,removeItemFromCart:u,getCart:d,clearCart:f}=a.useContext(p);a.useEffect(()=>{h&&d()},[]);const i=async(t,y)=>{l(r=>({...r,[t]:!0})),await j(t,y),l(r=>({...r,[t]:!1}))};async function g(t){await u(t),await d()}return e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx("title",{children:"Cart "})}),s?e.jsx("div",{className:"p-4 flex justify-center items-center min-h-screen mt-[65px]",children:e.jsx("div",{className:"w-full max-w-5xl md:p-10 p-5 ",children:((n=s==null?void 0:s.data)==null?void 0:n.products.length)===0?e.jsxs("div",{className:"flex flex-col justify-center items-center h-[65vh]",children:[e.jsx("i",{className:"fa-solid fa-cart-plus text-9xl text-gray-600/50 my-5"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Your cart is empty"}),e.jsx(o,{to:"/products",children:e.jsx("button",{className:"btn bg-main p-5 text-white rounded-3xl m-5 font-bold ",children:"Shop now"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-bold text-4xl m-5 my-9",children:"Your cart"}),e.jsx("div",{className:" my-10 relative shadow-md rounded-2xl  ",children:e.jsx("div",{className:"border-gray-400 border-2 md:p-5  shadow-lg rounded-2xl divide-y divide-gray-200 dark:divide-gray-700",children:(c=s==null?void 0:s.data)==null?void 0:c.products.map(t=>e.jsx("div",{className:"p-4 my-2 dark:bg-gray-800 bg-gray-50 dark:hover:bg-gray-600",children:e.jsxs("div",{className:"flex w-full items-center gap-x-6",children:[e.jsx("div",{className:"w-2/6",children:e.jsx("img",{src:t.product.imageCover,className:"w-[200px]",alt:t.product.title})}),e.jsxs("div",{className:"md:w-2/3 w-full   ",children:[e.jsxs("div",{className:`flex justify-between\r
                             mb-10 `,children:[e.jsx("div",{className:" font-semibold text-gray-900 dark:text-white me-2 md:m-0",children:t.product.title.split(" ").splice(0,2).join(" ")}),e.jsx("button",{onClick:()=>g(t.product.id),className:"text-red-600 dark:text-red-500 hover:underline",children:e.jsx("i",{className:"fa-solid fa-trash"})})]}),e.jsxs("div",{className:"flex justify-between  ",children:[e.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:[t.price*t.count," EGP"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>i(t.product.id,t.count-1),className:" w-[20px]  flex justify-center items-center  text-gray-500 bg-white border border-gray-300 rounded-full hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-400",children:"-"}),e.jsx("span",{children:m[t.product.id]?e.jsx(w,{size:20,color:"#000 "}):t.count}),e.jsx("button",{onClick:()=>i(t.product.id,t.count+1),className:"w-[20px] flex justify-center items-center text-gray-500 bg-white border border-gray-300 rounded-full hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-400",children:"+"})]})]}),e.jsx("div",{})]})]})},t.product.id))})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center bg-gray-50 dark:bg-gray-700 p-4 text-gray-700 dark:text-gray-400 text-xs font-semibold uppercase",children:[e.jsxs("span",{className:"sm:text-2xl text-lg",children:["Total Cart Price: ",(x=s==null?void 0:s.data)==null?void 0:x.totalCartPrice]}),e.jsxs("button",{onClick:f,className:"btn bg-red-600 text-white p-2 rounded-md mt-2 sm:mt-0",children:["Clear All Cart ",e.jsx("i",{className:"fa-solid fa-trash ml-2"})]})]}),e.jsx("div",{className:"flex flex-col w-full sm:w-[90%] mx-auto mt-4",children:e.jsx(o,{to:`/checkout/${s.cartId}`,className:"btn bg-main p-4 rounded-md text-white text-center",children:"Check out"})})]})})}):e.jsx("div",{className:" mt-[100px] flex justify-center items-center",children:e.jsx(N,{color:"#0aad0a",size:50})})]})}export{L as default};
