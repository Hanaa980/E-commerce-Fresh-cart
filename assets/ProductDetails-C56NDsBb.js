import{b as x,r as a,j as e,a as f,c as p,H as h,G as j}from"./index-C2O5eSQt.js";import{P as g,W as w,B as y}from"./ProductItem-AeykiGPF.js";import{S as v}from"./index-CgfIstgS.js";import"./ClipLoader-BfEd_EFM.js";function u(o,c,r){return o.filter(s=>s.category._id==c&&s._id!==r)}function N({product:o}){let{id:c,categoryId:r}=x();const[s,l]=a.useState([]),[i,d]=a.useState([]);function n(){f.get("https://ecommerce.routemisr.com/api/v1/products").then(({data:t})=>{d(t.data);let m=u(t.data,r,c);l(m)}).catch(t=>{})}return a.useEffect(()=>{n()},[]),a.useEffect(()=>{let t=u(i,r,c);l(t)},[c]),e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl text-center font-bold ",children:"Related products "}),e.jsx("div",{className:"flex flex-wrap my-10 px-10 ",children:s.map(t=>e.jsx(g,{product:t},t.id))})]})}function E(){let{addToCart:o}=a.useContext(p);const[c,r]=a.useState(!0),[s,l]=a.useState({});let{id:i}=x(),d={dots:!0,infinite:!0,autoplay:!0,draggable:!0,autoplaySpeed:1e3,speed:500,slidesToShow:1,slidesToScroll:1,arrows:!1};function n(){f.get(`https://ecommerce.routemisr.com/api/v1/products/${i}`).then(({data:t})=>{l(t.data),r(!1)}).catch(t=>{r(!1)})}return a.useEffect(()=>{l({}),r(!0),window.scrollTo({top:0,behavior:"smooth"}),n()},[i]),e.jsxs(e.Fragment,{children:[e.jsx(h,{children:e.jsx("title",{children:" Product Details "})}),c?e.jsx("div",{className:"mt-[100px] flex w-fullh-lvh items-center justify-center",children:e.jsx(j,{color:"#0aad0a",size:50})}):e.jsxs(e.Fragment,{children:[" ",e.jsxs("div",{className:" mt-[100px] w-8/12 md:w-8/12 m-auto md:flex-row flex-col  flex  gap-5 justify-center md:justify-between my-10 items-center ",children:[e.jsx("div",{className:"w-full px-5 md:w-5/12 border ",children:e.jsx(v,{...d,children:s.images.map((t,m)=>e.jsx("img",{src:t},m))})}),e.jsxs("div",{className:"w-full flex  flex-col md:w-7/12  ",children:[e.jsxs("div",{className:"flex justify-between items-center ",children:[e.jsx("h2",{className:"my-5 text-2xl ",children:s.title}),e.jsx(w,{product:s})]}),e.jsx("p",{className:" text-gray-400",children:s.description}),e.jsx("span",{className:"my-2 ",children:s.category.name}),e.jsx(y,{product:s,addToCart:o})]})]})]}),e.jsx(N,{product:s})]})}export{E as default};
